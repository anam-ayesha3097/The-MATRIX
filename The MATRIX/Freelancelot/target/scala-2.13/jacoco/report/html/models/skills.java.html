<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>skills.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=2;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Jacoco Coverage Report</a> &gt; <a href="index.source.html" class="el_package">models</a> &gt; <span class="el_source">skills.java</span></div><h1>skills.java</h1><pre class="source lang-java linenums">package models;

import akka.actor.AbstractActor;
import akka.actor.Props;
import org.json.JSONArray;
import org.json.JSONObject;
import service.FreelaancelotList;
import service.Freelancelot;

import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Scanner;
import java.util.stream.Collectors;

import static models.Utilities.date_converter;
/**
 * Displays top 10 teleated Skills of the project
 * @author Raahul John
 * @version 1.0
 */
<span class="fc" id="L25">public class skills {</span>

    // public static Props getProps(){return Props.create(WordStats.class);}
<span class="fc" id="L28">    public static LinkedHashMap&lt;String, FreelaancelotList&gt; projects_active= new LinkedHashMap&lt;String, FreelaancelotList&gt;();</span>
<span class="fc" id="L29">    public static LinkedHashMap&lt;String, FreelaancelotList&gt; projects_active10= new LinkedHashMap&lt;String, FreelaancelotList&gt;();</span>
<span class="fc" id="L30">    public static LinkedHashMap&lt;String, FreelaancelotList&gt; skills_active= new LinkedHashMap&lt;String, FreelaancelotList&gt;();</span>
<span class="fc" id="L31">    public static Freelancelot proj_det = null;</span>
<span class="fc" id="L32">    public static String preview_description = &quot;&quot;;</span>
    static JSONObject result;
<span class="fc" id="L34">    static ArrayList&lt;String&gt; skillarr = new ArrayList&lt;&gt;();</span>
    //  static ArrayList&lt;String&gt; skillperproj = new ArrayList&lt;&gt;();



    /**
     * Calculates the Flesch Readability Index of each Project with Education Level and its Average
     * @param searchTerm String Job Searched
     * @return Freelancelotlist Linked HashMap
     * @author Raahul John
     */

    public static LinkedHashMap&lt;String, FreelaancelotList&gt; getDataSkills(String searchTerm ) throws MalformedURLException {
<span class="fc" id="L47">        String[] s = searchTerm.split(&quot; &quot;);</span>
<span class="fc" id="L48">        String string = &quot;\&quot;&quot;;</span>
<span class="fc bfc" id="L49" title="All 2 branches covered.">        for (int i = 0; i &lt; s.length; i++) {</span>
<span class="fc" id="L50">            string += s[i] + &quot;%20&quot;;</span>
        }
<span class="fc" id="L52">        string += &quot;\&quot;&quot;;</span>
<span class="fc" id="L53">        FreelaancelotList projectList = new FreelaancelotList();</span>
        try {
<span class="fc" id="L55">            URL url = new URL(&quot;https://wwww.freelancer.com/api/projects/0.1/projects/active?job_details=true&amp;limit=10&amp;sort_field=time_submitted&amp;jobs[]&amp;query=&quot; + string);</span>
<span class="fc" id="L56">            HttpURLConnection conn = (HttpURLConnection) url.openConnection();</span>
<span class="fc" id="L57">            conn.setRequestMethod(&quot;GET&quot;);</span>
<span class="fc" id="L58">            conn.connect();</span>

<span class="pc bpc" id="L60" title="1 of 2 branches missed.">            if (conn.getResponseCode() == 200) {</span>
<span class="fc" id="L61">                Scanner sc = new Scanner(url.openStream());</span>
<span class="fc" id="L62">                String temp = &quot;&quot;;</span>
<span class="fc bfc" id="L63" title="All 2 branches covered.">                while (sc.hasNext()) {</span>
<span class="fc" id="L64">                    temp = temp + sc.nextLine();</span>
                }
<span class="fc" id="L66">                JSONObject json = new JSONObject(temp);</span>
<span class="fc" id="L67">                result = json.getJSONObject(&quot;result&quot;);</span>
                //project
<span class="fc" id="L69">                JSONArray jsonArr = json.getJSONObject(&quot;result&quot;).getJSONArray(&quot;projects&quot;);</span>
<span class="fc" id="L70">                ArrayList&lt;Freelancelot&gt; projects = new ArrayList&lt;Freelancelot&gt;();</span>

<span class="fc bfc" id="L72" title="All 2 branches covered.">                for (int i = 0; i &lt; jsonArr.length(); i++) {</span>
<span class="fc" id="L73">                    ArrayList&lt;String&gt; skillarr = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L74">                    ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();</span>


<span class="fc" id="L77">                    Integer project_ID = jsonArr.getJSONObject(i).getInt(&quot;id&quot;);</span>
<span class="fc" id="L78">                    String project_title = jsonArr.getJSONObject(i).getString(&quot;title&quot;);</span>

<span class="fc" id="L80">                    String project_Description = jsonArr.getJSONObject(i).getString(&quot;preview_description&quot;);</span>
<span class="fc" id="L81">                    String owner_ID = String.valueOf(jsonArr.getJSONObject(i).getInt(&quot;owner_id&quot;));</span>
<span class="fc" id="L82">                    Integer date = jsonArr.getJSONObject(i).getInt(&quot;time_submitted&quot;);</span>
<span class="fc" id="L83">                    String converted_date = date_converter(date);</span>

<span class="fc" id="L85">                    String project_type = jsonArr.getJSONObject(i).getString(&quot;type&quot;);</span>
<span class="fc" id="L86">                    JSONArray jsonArr2 = jsonArr.getJSONObject(i).getJSONArray(&quot;jobs&quot;);</span>

<span class="fc" id="L88">                    JSONArray jsonArray = (JSONArray)jsonArr2;</span>
<span class="pc bpc" id="L89" title="1 of 2 branches missed.">                    if (jsonArray != null) {</span>
<span class="fc" id="L90">                        int len = jsonArray.length();</span>
<span class="fc bfc" id="L91" title="All 2 branches covered.">                        for (int k = 0; k &lt; len; k++) {</span>
<span class="fc" id="L92">                            list.add(jsonArray.get(k).toString());</span>
                        }
                    }

<span class="fc bfc" id="L96" title="All 2 branches covered.">                    for (int l = 0; l &lt; list.size(); l++) {</span>
                        String[] list2;

<span class="fc" id="L99">                        list2 = list.get(l).split(&quot;\&quot;&quot;);</span>

<span class="fc" id="L101">                        skillarr.add(list2[3]);</span>
                    }


<span class="fc" id="L105">                    List&lt;String&gt; firstNElementsList = skillarr.stream().limit(5).collect(Collectors.toList());</span>
                    // System.out.println(firstNElementsList);
<span class="fc" id="L107">                    firstNElementsList.clear();</span>
                    // System.out.println(firstNElementsList);



<span class="fc" id="L112">                    proj_det = new Freelancelot(owner_ID, converted_date,project_ID, project_title, project_Description, project_type, String.valueOf(skillarr), &quot;&quot;, 1L,&quot;&quot;,&quot;&quot;,0,&quot;&quot;);</span>
<span class="fc" id="L113">                    skillarr.clear();</span>
                    //  proj_det.display();
<span class="fc" id="L115">                    projects.add(proj_det);</span>


                }
<span class="fc" id="L119">                projectList.setProjectList(projects);</span>
<span class="fc" id="L120">                skills_active.put(searchTerm,projectList);</span>




            }
<span class="fc" id="L126">            conn.disconnect();</span>
<span class="nc" id="L127">        } catch (Exception e) {</span>
<span class="nc" id="L128">            e.printStackTrace();</span>
<span class="fc" id="L129">        }</span>
<span class="fc" id="L130">        HttpURLConnection conn = null;</span>

<span class="fc" id="L132">        return skills_active;</span>



    }}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>